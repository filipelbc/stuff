#!/bin/bash

[ "$#" -lt 3 ] && echo "text-substitute <pattern> <replacement> <files>" && exit

g="grep --color=auto --exclude-dir=.git --exclude-dir=node_modules"

pattern=$1
shift

replacement=s/$pattern/$1/g
shift

$g -Irn "$pattern" $@

read -p "Apply substitution? [yes/no] " response
case $response in
    yes)
        $g -Irl "$pattern" $@ | xargs sed -i -e "$replacement"
        ;;
    *)
        ;;
esac
